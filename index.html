<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CyberTap Conquest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
      /* --- TU CSS DE ANIMACIÓN INTEGRADO --- */
      body {
        font-family: 'Roboto', sans-serif;
        overscroll-behavior: none;
        position: relative; 
        min-height: 100vh;
        overflow: hidden;
      }
      .font-orbitron {
        font-family: 'Orbitron', sans-serif;
      }
      @keyframes pulse-glow {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 0 15px 5px rgba(34, 211, 238, 0.2);
        }
        50% {
          transform: scale(1.03);
          box-shadow: 0 0 25px 10px rgba(34, 211, 238, 0.4);
        }
      }
      .animate-pulse-glow {
        animation: pulse-glow 3s infinite ease-in-out;
      }
      
      /* Animación flotante personalizada del usuario */
      .floating-text {
        position: absolute;
        font-size: 48px;
        font-weight: bold;
        /* Usamos el color de tu ejemplo (#00ff80) para el efecto flotante */
        color: #00ff80; 
        opacity: 1;
        animation: floatUp 0.8s ease-out forwards;
        pointer-events: none;
        text-shadow: 0 0 6px #00ff80;
        z-index: 1000;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        100% {
          transform: translateY(-80px);
          opacity: 0;
        }
      }
      
      /* --- ESTILOS DE CONGELAMIENTO (FREEZE) --- */
      #freeze-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2000;
        pointer-events: all;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        background-color: rgba(0, 150, 255, 0.2);
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
        border-radius: 1rem;
      }
      @keyframes ice-pulse {
        0%, 100% { opacity: 0.8; transform: scale(1); text-shadow: 0 0 8px rgba(128, 255, 255, 0.8); }
        50% { opacity: 1; transform: scale(1.05); text-shadow: 0 0 15px rgba(255, 255, 255, 1); }
      }
      .animate-ice-pulse {
          animation: ice-pulse 1.5s infinite ease-in-out;
      }
      
      /* --- NUEVOS ESTILOS DE LLAMA (FLAME / BURNING) --- */
      #flame-overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 1999; /* Por debajo de FREEZE */
          pointer-events: none; /* NO bloquea clics, solo efecto visual */
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          /* Tonalidad roja/naranja de drenaje */
          background-color: rgba(255, 50, 0, 0.1); 
          backdrop-filter: brightness(1.2);
          -webkit-backdrop-filter: brightness(1.2);
          border-radius: 1rem;
      }

      @keyframes flame-pulse {
          0%, 100% { opacity: 0.8; transform: scale(1); text-shadow: 0 0 8px rgba(255, 100, 0, 0.8); }
          50% { opacity: 1; transform: scale(1.05); text-shadow: 0 0 15px rgba(255, 200, 0, 1); }
      }
      .animate-flame-pulse {
          animation: flame-pulse 1s infinite alternate;
      }

      .hidden {
        display: none !important;
      }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-2">
    <div id="app-container" class="w-full max-w-md h-[800px] max-h-[90vh] bg-black rounded-3xl border-4 border-cyan-400/50 shadow-2xl shadow-cyan-500/20 overflow-hidden flex flex-col">
        
        <!-- FREEZE OVERLAY: Capa que bloquea todo cuando el usuario está congelado -->
        <div id="freeze-overlay" class="hidden">
            <div class="text-cyan-200 animate-ice-pulse">
                <svg class="w-20 h-20 mx-auto mb-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20"></path><path d="m14 4-2 18"></path><path d="m10 4 2 18"></path><path d="M4 14h16"></path><path d="M4 10h16"></path><path d="m20 16-16-3"></path><path d="m4 8 16 3"></path></svg>

                <h2 class="font-orbitron text-3xl mb-2 text-shadow-lg">CONGELADO</h2>
                <p id="freeze-timer" class="text-xl font-mono text-white"></p>
                <p class="text-sm mt-4 text-gray-300">No puedes interactuar hasta que termine el castigo.</p>
                
                <!-- Botón de Rescate (Bailout) -->
                <button id="freeze-bailout-button" class="mt-6 bg-red-600 hover:bg-red-500 disabled:bg-red-900/50 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg flex items-center justify-center space-x-2" data-cost="20000">
                    Pagar Rescate (20,000)
                </button>
            </div>
        </div>
        
        <!-- FLAME OVERLAY: Capa visual de drenaje (no bloquea clics) -->
         <div id="flame-overlay" class="hidden">
            <div class="text-orange-400 animate-flame-pulse">
                <h2 class="font-orbitron text-2xl mb-2">¡DRENAJE ACTIVO!</h2>
                <p id="flame-timer" class="text-lg font-mono text-white"></p>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="flex-grow p-4 overflow-y-auto overflow-x-hidden">
            <!-- Registration Screen -->
            <section id="screen-registration" class="screen flex flex-col items-center justify-center h-full p-4 text-center">
                <h1 class="font-orbitron text-4xl mb-2 text-cyan-300">Bienvenido</h1>
                <p class="mb-8 text-gray-400">Ingresa tu apodo para comenzar a jugar.</p>
                <form id="registration-form" class="w-full max-w-sm">
                    <input type="text" id="nickname-input" placeholder="Tu apodo" maxLength="15" class="w-full text-center bg-gray-800 border-2 border-cyan-700 rounded-lg px-4 py-3 text-lg mb-4 focus:outline-none focus:ring-2 focus:ring-cyan-400" />
                    <p id="registration-error" class="text-red-400 my-3 text-center hidden"></p>
                    <button id="registration-button" type="submit" class="w-full bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-colors text-xl font-orbitron">
                        Empezar a Jugar
                    </button>
                </form>
            </section>
            
            <!-- Loading Screen -->
            <section id="screen-loading" class="screen hidden text-center p-8">
                 Cargando estado del juego...
            </section>

             <!-- Home Screen -->
            <section id="screen-HOME" class="screen hidden"></section>
            
             <!-- Friends Screen -->
             <section id="screen-FRIENDS" class="screen hidden"></section>

             <!-- Boosts Screen -->
             <section id="screen-BOOSTS" class="screen hidden"></section>

             <!-- Cards Screen -->
             <section id="screen-CARDS" class="screen hidden"></section>

             <!-- Market Screen -->
             <section id="screen-MARKET" class="screen hidden">
                <div class="flex flex-col items-center justify-center h-full text-center text-gray-500">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                    <h2 class="font-orbitron text-2xl mt-4">Market</h2>
                    <p class="mt-2">Esta sección está en desarrollo.</p>
                    <p>Aquí podrás canjear tus monedas por premios.</p>
                </div>
             </section>

             <!-- Auctions Screen -->
             <section id="screen-AUCTIONS" class="screen hidden">
                 <div class="flex flex-col h-full p-4">
                    <h2 class="font-orbitron text-3xl text-center mb-6 text-cyan-300">Arca Común & Remates</h2>
                    
                    <div id="arca-comun-status" class="bg-gray-800/50 p-4 rounded-xl border border-gray-700 mb-6 text-center">
                        <p class="text-sm text-gray-400">Pozo Acumulado (Arca Común)</p>
                        <div class="flex items-center justify-center space-x-2 mt-1">
                            <div class="w-6 h-6 text-yellow-300">${Icons.Gem.replace('w-4 h-4', 'w-6 h-6')}</div>
                            <h3 id="arca-comun-coins" class="font-orbitron text-3xl font-bold">0</h3>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Fondos de penalizaciones y quitas.</p>
                    </div>

                    <div id="auction-details" class="flex-grow bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                        <h3 class="font-orbitron text-xl mb-3 text-center text-yellow-400">Subasta Diaria</h3>
                        <div class="space-y-2 text-sm">
                            <p>Tiempo Restante: <span id="auction-timer" class="font-mono text-cyan-300">--:--:--</span></p>
                            <p>Pozo a Ganar: <span id="auction-pot" class="font-bold text-yellow-300">0</span></p>
                            <p>Puja Actual: <span id="auction-bid" class="font-bold text-white">0</span> (<span id="auction-leader" class="text-cyan-400">Nadie</span>)</p>
                        </div>
                        
                        <form id="auction-bid-form" class="mt-6">
                            <label for="bid-input" class="block text-sm font-semibold mb-2">Tu Puja (Mínimo: <span id="min-bid-display">0</span>)</label>
                            <input type="number" id="bid-input" placeholder="Ingresa tu puja" min="1" class="w-full text-center bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-cyan-400" />
                            <p id="bid-error" class="text-red-400 my-2 text-center hidden"></p>
                            <button id="bid-button" type="submit" class="w-full bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-black font-bold py-3 px-4 rounded-lg transition-colors text-lg font-orbitron flex items-center justify-center space-x-2 mt-4">
                                Pujar
                            </button>
                        </form>
                    </div>
                </div>
             </section>

             <!-- Settings Screen (Eliminada) -->
             <!-- <section id="screen-SETTINGS" class="screen hidden"></section> -->

        </main>
        
        <!-- Navigation. Se ajusta a grid-cols-6 en script.js para que coincida con los 6 elementos. -->
        <nav id="app-nav" class="hidden flex-shrink-0 grid grid-cols-6 gap-1 p-2 bg-gray-900/50 border-t border-cyan-900">
            <!-- Nav items will be injected here -->
        </nav>

        <!-- Footer -->
        <div id="app-footer" class="text-center text-xs text-gray-500 p-2 border-t border-cyan-900">
             Esperando registro...
        </div>
    </div>
    
    <!-- Corrección para modo portable: Quitamos type="module" y aseguramos la ruta relativa -->
    <script src="script.js"></script>
</body>
</html>
